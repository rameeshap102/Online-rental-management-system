{% extends "rentalapp/base.html" %}
{% load static %}

{% block title %}Login - RentEasy{% endblock %}

{% block content %}
<style>
    body { background-color: #f8f9fa; }
    .login-container { min-height: calc(100vh - 100px); display: flex; align-items: center; }
    .login-form { background: white; padding: 3rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
    .user-icon { width: 60px; height: 60px; background-color: #e9f7ef; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem; }
    .user-type-btn { border: 2px solid #dee2e6; background: white; color: #6c757d; padding: 0.5rem 1.5rem; border-radius: 6px; }
    .user-type-btn.active { border-color: #28a745; background-color: #28a745; color: white; }
    .btn-success { background-color: #28a745; border-color: #28a745; }
</style>

<div class="login-container">
    <div class="container">
        <form method="post" class="login-form">
            {% csrf_token %}

            <div class="user-icon">
                <i class="fas fa-user text-success" style="font-size: 24px;"></i>
            </div>

            <div class="text-center mb-4">
                <h2 class="fw-bold">Welcome Back</h2>
                <p class="text-muted">Sign in to your account to continue</p>
            </div>

            <div class="mb-4">
                <label class="form-label fw-semibold">I am a</label>
                <div class="d-flex gap-3">
                    <button type="button" class="user-type-btn active flex-fill" id="tenant-btn" onclick="selectUserType('tenant')">
                        <i class="fas fa-user me-2"></i>Tenant
                    </button>
                    <button type="button" class="user-type-btn flex-fill" id="landlord-btn" onclick="selectUserType('landlord')">
                        <i class="fas fa-building me-2"></i>Landlord
                    </button>
                </div>
                <input type="hidden" name="role" id="role-input" value="tenant">
            </div>

            <div class="mb-3">
                <label class="form-label fw-semibold">Email Address</label>
                <input type="email" class="form-control form-control-lg" name="username" required>
            </div>

            <div class="mb-3">
                <label class="form-label fw-semibold">Password</label>
                <div class="position-relative">
                    <input type="password" class="form-control form-control-lg" id="password" name="password" required>
                    <button type="button" class="btn position-absolute end-0 top-50 translate-middle-y" onclick="togglePassword()" style="border: none;">
                        <i class="fas fa-eye text-muted" id="password-icon"></i>
                    </button>
                </div>
            </div>

            <div class="d-flex justify-content-between mb-4">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="remember">
                    <label class="form-check-label text-muted">Remember me</label>
                </div>
                <a href="{% url 'signup' %}" class="text-success text-decoration-none fw-semibold">Sign up</a>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
            {% endif %}

            <button type="submit" class="btn btn-success btn-lg w-100 mb-4">Sign In</button>

            <div class="text-center">
                <span class="text-muted">Don't have an account? </span>
                <a href="{% url 'signup' %}" class="text-success text-decoration-none fw-semibold">Sign up</a>
            </div>
        </form>
    </div>
</div>

<script>
    function selectUserType(type) {
        document.getElementById('tenant-btn').classList.remove('active');
        document.getElementById('landlord-btn').classList.remove('active');
        document.getElementById(type + '-btn').classList.add('active');
        document.getElementById('role-input').value = type;
    }

    function togglePassword() {
        const password = document.getElementById('password');
        const icon = document.getElementById('password-icon');
        if (password.type === 'password') {
            password.type = 'text';
            icon.classList.replace('fa-eye', 'fa-eye-slash');
        } else {
            password.type = 'password';
            icon.classList.replace('fa-eye-slash', 'fa-eye');
        }
    }
</script>
{% endblock %}
